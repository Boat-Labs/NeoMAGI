# 0033-m2-anti-drift-probe-baseline-adjustment-to-6

- Status: accepted
- Date: 2026-02-22

## 选了什么
- 本决策作为 `0030` 的补充：M2 反漂移验收的 Probe 基线从“最少 20 条”调整为“6 条核心机制 Probe”。
- M2 阶段要求保留离线评估记录（命中率、丢失项、失败样例），但 Probe 集规模按 6 条执行，覆盖三类场景：
  - 安全/边界约束
  - 用户偏好约束
  - 任务连续性约束
- “20+ Probe”作为 M3 验收基线执行，随持久记忆闭环（memory recall / memory append）上线后统一评估。
- 本决策不改变 `0030` 的核心语义：锚点保护范围、最终 prompt 可见性口径、失败重试与降级路径保持不变。

## 为什么
- M2 的主目标是“会话内连续性机制闭环”而非“跨会话记忆质量评估”；当前实现重点在锚点可见性与降级可用性。
- 在 M2 阶段扩展到 20+ Probe，会显著增加验收工作量，但对当前机制正确性的边际收益有限。
- M3 引入会话外持久记忆后，20+ Probe 的覆盖价值更高，可一次性评估“会话内连续性 + 会话外记忆召回”的真实行为。
- 该调整能保持里程碑节奏，避免为满足数量指标而引入低效验证，符合“最小可用闭环”原则。

## 放弃了什么
- 方案 A：严格按原口径在 M2 直接补齐 20+ Probe。
  - 放弃原因：与 M2 机制层目标不匹配，验收成本上升，且部分 Probe 在缺少 M3 数据面时信息增益有限。
- 方案 B：取消 Probe 验收，仅保留代码测试。
  - 放弃原因：会削弱反漂移的可审计证据，不满足 `0030` 对离线评估记录的要求。

## 影响
- M2 Gate 结论口径应标注为：按 `0033` 执行的“6 Probe 基线”完成验收。
- 文档中仍出现的“M2 最少 20 Probe”表述应视为历史口径，后续以 `0033` 为准。
- M3 计划与验收需显式包含“20+ Probe”执行与结果归档，作为阶段门槛之一。
