# 0025-mode-switching-user-controlled-chat-safe-default

- Status: accepted
- Date: 2026-02-20

## 选了什么
- mode 切换权归用户，不归模型。
- 默认 mode 为 `chat_safe`。
- mode 采用会话级显式切换，不做自动意图识别切换。
- M1.5 阶段固定 `chat_safe` 运行，不开放 `coding` 模式切换。

## 为什么
- 工具能力面正在扩展，先收紧 mode 控制可降低误执行和越权风险。
- 会话级显式切换具备较高可预测性，便于测试、审计与问题复盘。
- 禁止自动意图切换可避免模型在不确定语义下擅自升级权限。
- M1.5 先固定 `chat_safe`，可先完成模式框架与边界验证，再决定 `coding` 的开放节奏。

## 放弃了什么
- 方案 A：模型自动识别任务意图并切换 mode。
  - 放弃原因：风险高、不可预测、难以审计。
- 方案 B：请求级隐式切换（由消息内容触发）。
  - 放弃原因：用户感知弱，权限边界不清晰。
- 方案 C：M1.5 直接开放 `coding`。
  - 放弃原因：在工具边界与前端交互未完全稳定前，风险窗口过大。

## 影响
- M1.5 验收阶段以 `chat_safe` 为唯一生效模式。
- 后续若要开放 `coding`，需新增决议明确开放条件、交互提示与回退策略。
- 前后端实现需保证：模型无权切换 mode，mode 仅由用户显式动作或会话配置改变。
